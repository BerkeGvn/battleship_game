(()=>{"use strict";const e=function(e,t,i="horizontal"){const s={name:t,direction:i,isSunk:!1},a=new Array(e).fill(1);function n(){return!!a.every((e=>"X"===e))&&(s.isSunk=!0,!0)}return{details:s,hit:function(e){return!!n()||(a[e]="X",a)},isSink:n,shipSize:a}},t=function(){const t=[];for(let e=0;e<10;e+=1){const e=new Array(10).fill(0);t.push(e)}const i=[e(5,"carrier"),e(4,"battleship"),e(3,"cruiser"),e(2,"destroyer1"),e(2,"destroyer2")];function s(e,t){const i=t;if(i.details.position=[],"vertical"===t.details.direction){i.details.column=e[1];let t=e[0];for(;i.details.position.length<i.shipSize.length;)i.details.position.push(t),t+=1}else{i.details.row=e[0];let t=e[1];for(;i.details.position.length<i.shipSize.length;)i.details.position.push(t),t+=1}}return{board:t,gameover:function(){return!!i.every((e=>!0===e.details.isSunk))},fleet:i,placeShip:function(e,i){if(function(e,t){return"vertical"===t.details.direction&&e[0]+t.shipSize.length>10||"horizontal"===t.details.direction&&e[1]+t.shipSize.length>10}(e,i))return!1;if(function(e,i){let s;if("vertical"===i.details.direction){s=e[0];for(let a=0;a<i.shipSize.length;a+=1)if(1===t[s+a][e[1]])return!0}else for(let a=0;a<i.shipSize.length;a+=1)if(s=e[1],1===t[e[0]][s+a])return!0;return!1}(e,i))return!1;if("vertical"===i.details.direction){for(let s=0;s<i.shipSize.length;s+=1)t[e[0]+s].splice(e[1],1,1);return s(e,i),!0}return t[e[0]].splice(e[1],i.shipSize.length,...i.shipSize),s(e,i),!0},receiveAttack:function(e){return"#"!==t[e[0]][e[1]]&&(1===t[e[0]][e[1]]?(t[e[0]][e[1]]="#",function(e){const t=i.filter((t=>t.details.row===e[0]&&t.details.position.includes(e[1])||t.details.column===e[1]&&t.details.position.includes(e[0])));let s,a;"vertical"===t[0].details.direction?(s=t.filter((t=>t.details.position.includes(e[0]))),a=s[0].details.position.indexOf(e[0])):(s=t.filter((t=>t.details.position.includes(e[1]))),a=s[0].details.position.indexOf(e[1]));const{name:n}=s[0].details;return function(e,t){const s=i.findIndex((t=>t.details.name===e));i[s].hit(t),i[s].isSink()&&(i[s].details.isSunk=!0)}(n,a)}(e)):t[e[0]][e[1]]="#")}}},i=function(){return{gameboard:t(),attack:function(e,t){return e.gameboard.receiveAttack(t)}}},s=(e,t)=>Math.floor(Math.random()*(t-e))+e;let a=i(),n=i();function r(e,t,i){const a=s(0,9),n=s(0,9),o=e.gameboard.placeShip([a,n],t);return!i.includes(`${a}${n}`)&&o?[a,n]:r(e,t,i)}function o(e){const t=[];!function(e){e.gameboard.fleet.forEach((e=>{1===s(0,2)&&(e.details.direction="vertical")}))}(e),e.gameboard.fleet.forEach((i=>{const s=r(e,i,t);t.push(`${s[0]}${s[1]}`),c,e.gameboard.placeShip(s,i)}))}o(n);const d=document.querySelector(".grid-main-container"),l=document.querySelector(".fleet-container"),u=document.querySelector(".start"),f=document.querySelector(".render"),m=(document.querySelectorAll(".box"),document.querySelectorAll(".ships")),h=document.querySelector(".result"),p=document.querySelector(".winner"),L=document.querySelector(".random"),v=function(){const e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("h1");i.textContent="Your Board",i.classList.add("grid-name");const s=document.createElement("h1");s.textContent="Enemey Board",s.classList.add("grid-name"),e.appendChild(i),t.appendChild(s),e.classList.add("player-grid-container"),e.classList.add("grid-container"),t.classList.add("ai-grid-container"),t.classList.add("grid-container"),t.classList.add("none"),t.classList.add("invisible");for(let i=0;i<10;i+=1){const s=document.createElement("div");s.setAttribute("id",i),s.classList.add(`row-${i}`),s.classList.add("row");const a=document.createElement("div");a.setAttribute("id",i),a.classList.add(`row-2-${i}`),a.classList.add("row");for(let e=0;e<10;e+=1){const t=document.createElement("div");t.classList.add("box"),t.classList.add(`box-${e}`),t.setAttribute("data-y",i),t.setAttribute("data-x",e),s.appendChild(t);const n=document.createElement("div");n.classList.add("box"),n.classList.add(`box-2-${e}`),a.appendChild(n)}e.appendChild(s),t.appendChild(a)}d.appendChild(e),d.appendChild(t)},g=[];let b,S,x=1,y=!0,$=!1,E=!1,k=!1,w=!1;function q(e,t){return!(e>9||e<0||t>9||t<0||"#"===a.gameboard.board[e][t]||g.includes(`${e}${t}`))}function z(e){"axisXLeft"===e&&($=!1,E=!0),"axisXRight"===e&&(E=!1,k=!0),"axisYUpper"===e&&(k=!1,w=!0),"axisYBelow"===e&&(w=!1,y=!0)}function C(e,t,i){let s;!function(e,t){return 1===a.gameboard.board[e][t]}(e,t)?(s=document.querySelector(`.row-${e} .box-${t}`),g.push(`${e}${t}`),x=1,s.classList.add("o"),z(i)):(n.attack(a,[e,t]),g.push(`${e}${t}`),s=document.querySelector(`.row-${e} .box-${t}`),s.classList.add("x"),x+=1)}async function A(){let e,t;if($){if(e=b,t=S+x,q(e,t))return C(e,t,"axisXLeft");z("axisXLeft"),x=1}if(E){if(e=b,t=S-x,q(e,t))return C(e,t,"axisXRight");z("axisXRight"),x=1}if(k){if(e=b-x,t=S,q(e,t))return C(e,t,"axisYUpper");z("axisYUpper"),x=1}if(w){if(e=b+x,t=S,q(e,t))return C(e,t,"axisYBelow");z("axisYBelow"),x=1}if(y){const e=s(0,10),t=s(0,10);if(g.includes(`${e}${t}`))return A();g.push(`${e}${t}`),await(300,new Promise((e=>setTimeout(e,300))));const i=document.querySelector(`.row-${e} .box-${t}`);1===a.gameboard.board[e][t]?(i.classList.add("x"),b=e,S=t,$=!0,E=!1,k=!1,w=!1,y=!1):i.classList.add("o"),n.attack(a,[e,t])}return!0}function Y(){return a.gameboard.gameover()?(p.textContent="You lose!",h.classList.remove("none"),!0):!!n.gameboard.gameover()&&(p.textContent="You win!",h.classList.remove("none"),!0)}v();let X=!0;async function B(){return A(),Y(),X=!0,X}function R(){for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)1===a.gameboard.board[e][t]&&document.querySelector(`.row-${e} .box-${t}`).classList.add("mark")}R();let U=0;const D=(()=>{const e=document.querySelectorAll(".ships"),t=document.querySelectorAll(".box");let i,s;return{rotate:function(){e.forEach((e=>{e.addEventListener("dblclick",(()=>{"horizontal"===a.gameboard.fleet[i].details.direction?(a.gameboard.fleet[i].details.direction="vertical",e.classList.remove("horizontal"),e.classList.add("vertical")):(a.gameboard.fleet[i].details.direction="horizontal",e.classList.remove("vertical"),e.classList.add("horizontal"))}))}))},drag:function(n=t){const r=e=>{i=a.gameboard.fleet.findIndex((t=>t.details.name===e.target.dataset.name))},o=e=>{s=e.target},d=e=>e.preventDefault(),c=e=>{e.preventDefault(),e.target.classList.add("hover")},f=e=>{e.target.classList.remove("hover")},m=e=>{const t=e.target,n=Number(t.dataset.y),r=Number(t.dataset.x);a.gameboard.placeShip([n,r],a.gameboard.fleet[i])&&(U+=1,s.classList.add("none")),5===U&&(u.classList.remove("fadeout"),u.classList.remove("invisible"),u.classList.add("fadein"),l.classList.add("shrink"),U=0),R(),e.target.classList.remove("hover")};n.forEach((e=>{e.addEventListener("dragover",d),e.addEventListener("dragenter",c),e.addEventListener("dragleave",f),e.addEventListener("drop",m)})),e.forEach((e=>{e.addEventListener("mousedown",r),e.addEventListener("dragstart",o)}))}}})(),I=function(){!function(){for(;d.firstChild;)d.removeChild(d.firstChild)}(),v();const e=document.querySelectorAll(".box");D.drag(e),m.forEach((e=>e.classList.remove("none"))),a=i(),n=i(),o(n),l.classList.remove("shrink"),h.classList.add("none"),L.classList.add("fadein"),g.splice(0,g.length),x=1,y=!0,$=!1,E=!1,k=!1,w=!1};u.addEventListener("click",(()=>{!function(){if(X){for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)document.querySelector(`.row-2-${e} .box-2-${t}`).addEventListener("click",(i=>{1===n.gameboard.board[e][t]?i.target.classList.add("x"):i.target.classList.add("o"),a.attack(n,[e,t]),Y()||B()}),{once:!0});X=!1}}(),u.classList.remove("fadein"),u.classList.add("fadeout"),u.classList.add("invisible"),L.classList.remove("fadein"),L.classList.add("fadeout");const e=document.querySelector(".ai-grid-container");e.classList.remove("none"),setTimeout((()=>{e.classList.remove("invisible"),e.classList.add("fadein")}),500)})),L.addEventListener("click",(()=>{I(),o(a),function(){for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)1===a.gameboard.board[e][t]&&document.querySelector(`.row-${e} .box-${t}`).classList.add("mark")}(),u.classList.add("fadein"),u.classList.remove("fadeout"),u.classList.remove("invisible"),l.classList.add("shrink")})),f.addEventListener("click",I),D.drag(),D.rotate()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwX2dhbWUvLi9zcmMvbW9kdWxlcy9GYWN0b3JpZXMvc2hpcEZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcF9nYW1lLy4vc3JjL21vZHVsZXMvRmFjdG9yaWVzL2dhbWVib2FyZEZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcF9nYW1lLy4vc3JjL21vZHVsZXMvRmFjdG9yaWVzL1BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwX2dhbWUvLi9zcmMvbW9kdWxlcy9oZWxwZXJzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBfZ2FtZS8uL3NyYy9tb2R1bGVzL3BsYXllcnMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcF9nYW1lLy4vc3JjL21vZHVsZXMvZG9tRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcF9nYW1lLy4vc3JjL21vZHVsZXMvZ3JpZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwX2dhbWUvLi9zcmMvbW9kdWxlcy9haS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwX2dhbWUvLi9zcmMvbW9kdWxlcy9nYW1lLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBfZ2FtZS8uL3NyYy9tb2R1bGVzL2RyYWdBbmRSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcF9nYW1lLy4vc3JjL21vZHVsZXMvcmVuZGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBfZ2FtZS8uL3NyYy9tb2R1bGVzL21haW5DbGlja0V2ZW50cy5qcyJdLCJuYW1lcyI6WyJsZW5ndGgiLCJuYW1lIiwiZGlyZWN0aW9uIiwiZGV0YWlscyIsImlzU3VuayIsInNoaXBTaXplIiwiQXJyYXkiLCJmaWxsIiwiaXNTaW5rIiwiZXZlcnkiLCJwYXJ0IiwiaGl0IiwicG9zaXRpb24iLCJib2FyZCIsImkiLCJyb3ciLCJwdXNoIiwiZmxlZXQiLCJyZWNvcmRTaGlwcyIsInNoaXBQb3NpdGlvbiIsInNoaXAiLCJyZWNvcmRUaGVTaGlwIiwiY29sdW1uIiwiZ2FtZW92ZXIiLCJwbGFjZVNoaXAiLCJwcmV2ZW50T3ZlckV4dGVuZCIsImNvb3JkIiwiaiIsImNoZWNrQ29vcmRpbmF0ZXMiLCJzcGxpY2UiLCJyZWNlaXZlQXR0YWNrIiwicmVjZWl2ZWRDb29yZCIsImZpbHRlciIsInZhbCIsImluY2x1ZGVzIiwiZGFtYWdlZFNoaXAiLCJkYW1hZ2VkUG9zaXRpb24iLCJpbmRleE9mIiwic2hpcEluZGV4IiwiZmluZEluZGV4IiwiaGl0VGhlU2hpcCIsImNhbGN1bGF0ZUhpdExvYyIsImdhbWVib2FyZCIsImF0dGFjayIsImVuZW15IiwicmFuZG9tIiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicGxheWVyMSIsInBsYXllcjIiLCJyYW5kb21OdW1iZXJzIiwicGxheWVyIiwicGxhY2VkQ29vcmQiLCJyYW5kb21Sb3ciLCJyYW5kb21Db2x1bW4iLCJwcm9wZXJQbGFjZWQiLCJyYW5kb21QbGFjZW1lbnQiLCJmb3JFYWNoIiwicmFuZG9tRGlyZWN0aW9uIiwicmFuZG9tQ29vcmQiLCJjIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZmxlZXRDb250YWluZXIiLCJzdGFydEJ0biIsInJlbmRlckJ0biIsInNoaXBzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlc3VsdFNjcmVlbiIsIndpbm5lciIsInJhbmRvbUJ0biIsInBsYXllck1haW5EaXYiLCJjcmVhdGVFbGVtZW50IiwiYWlNYWluRGl2IiwicGxheWVyMUJvYXJkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJwbGF5ZXIyQm9hcmQiLCJhcHBlbmRDaGlsZCIsInNldEF0dHJpYnV0ZSIsInJvdzIiLCJjb2wiLCJjb2wyIiwicmFuZG9tSGl0Q29vcmQiLCJjb3JyZWNSb3ciLCJjb3JyZWNDb2x1bW4iLCJyYW5kb21TaG90IiwiYXhpc1hMZWZ0IiwiYXhpc1hSaWdodCIsImF4aXNZVXBwZXIiLCJheGlzWUJlbG93IiwicHJvcGVySGl0IiwiY2hhbmdlQXhpcyIsImF4aXMiLCJtYXJrSGl0TG9jYXRpb24iLCJpbm5lckRpdiIsImNvcnJlY3RIaXQiLCJhc3luYyIsImFpSGl0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY2hlY2tHYW1lb3ZlciIsInJlbW92ZSIsInBsYXllclR1cm4iLCJyYW5kb21IaXQiLCJtYXJrU2hpcERpdnMiLCJzaGlwT25Cb2FyZCIsImdyaWRDZWxscyIsImRyYWdnZWRTaGlwIiwicm90YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRyYWciLCJjZWxscyIsImdldERyYWdnZWRTaGlwSW5kZXgiLCJlIiwidGFyZ2V0IiwiZGF0YXNldCIsImRyYWdTdGFydCIsImRyYWdPdmVyIiwicHJldmVudERlZmF1bHQiLCJkcmFnRW50ZXIiLCJkcmFnTGVhdmUiLCJkcmFnRHJvcCIsInkiLCJOdW1iZXIiLCJ4IiwiY2VsbCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUdyaWRzIiwib25jZSIsImhpdEV2ZW50IiwibWFya1JhbmRvbVBsYWNlbWVudCJdLCJtYXBwaW5ncyI6Im1CQWlDQSxRQWpDQSxTQUFxQkEsRUFBUUMsRUFBTUMsRUFBWSxjQUM3QyxNQUFNQyxFQUFVLENBQ2RGLE9BQ0FDLFlBQ0FFLFFBQVEsR0FHSkMsRUFBVyxJQUFJQyxNQUFNTixHQUFRTyxLQUFLLEdBRXhDLFNBQVNDLElBQ1AsUUFBSUgsRUFBU0ksT0FBT0MsR0FBa0IsTUFBVEEsTUFDM0JQLEVBQVFDLFFBQVMsR0FDVixHQWFYLE1BQU8sQ0FDTEQsVUFDQVEsSUFWRixTQUFhQyxHQUNYLFFBQUlKLE1BR0pILEVBQVNPLEdBQVksSUFDZFAsSUFNUEcsU0FDQUgsYUMwSEosRUFySkEsV0FDRSxNQUFNUSxFQUFRLEdBRWQsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsR0FBSyxFQUFHLENBQzlCLE1BQU1DLEVBQU0sSUFBSVQsTUFBTSxJQUFJQyxLQUFLLEdBQy9CTSxFQUFNRyxLQUFLRCxHQUliLE1BT01FLEVBQVEsQ0FQRSxFQUFZLEVBQUcsV0FDWixFQUFZLEVBQUcsY0FDbEIsRUFBWSxFQUFHLFdBQ1osRUFBWSxFQUFHLGNBQ2YsRUFBWSxFQUFHLGVBa0JsQyxTQUFTQyxFQUFZQyxFQUFjQyxHQUNqQyxNQUFNQyxFQUFnQkQsRUFJdEIsR0FGQUMsRUFBY2xCLFFBQVFTLFNBQVcsR0FFRixhQUEzQlEsRUFBS2pCLFFBQVFELFVBQTBCLENBQ3pDbUIsRUFBY2xCLFFBQVFtQixPQUFTSCxFQUFhLEdBQzVDLElBQUlKLEVBQU1JLEVBQWEsR0FDdkIsS0FBT0UsRUFBY2xCLFFBQVFTLFNBQVNaLE9BQVNxQixFQUFjaEIsU0FBU0wsUUFDcEVxQixFQUFjbEIsUUFBUVMsU0FBU0ksS0FBS0QsR0FDcENBLEdBQU8sTUFFSixDQUNMTSxFQUFjbEIsUUFBUVksSUFBTUksRUFBYSxHQUN6QyxJQUFJRyxFQUFTSCxFQUFhLEdBQzFCLEtBQU9FLEVBQWNsQixRQUFRUyxTQUFTWixPQUFTcUIsRUFBY2hCLFNBQVNMLFFBQ3BFcUIsRUFBY2xCLFFBQVFTLFNBQVNJLEtBQUtNLEdBQ3BDQSxHQUFVLEdBZ0doQixNQUFPLENBQ0xULFFBQU9VLFNBekhULFdBQ0UsUUFBSU4sRUFBTVIsT0FBT1csSUFBaUMsSUFBeEJBLEVBQUtqQixRQUFRQyxVQXdIdEJhLFFBQU9PLFVBOUQxQixTQUFtQlosRUFBVVEsR0FDM0IsR0EvQkYsU0FBMkJSLEVBQVVRLEdBQ25DLE1BQStCLGFBQTNCQSxFQUFLakIsUUFBUUQsV0FBNEJVLEVBQVMsR0FBS1EsRUFBS2YsU0FBU0wsT0FBUyxJQUVqRCxlQUEzQm9CLEVBQUtqQixRQUFRRCxXQUE4QlUsRUFBUyxHQUFLUSxFQUFLZixTQUFTTCxPQUFTLEdBNEJsRnlCLENBQWtCYixFQUFVUSxHQUM5QixPQUFPLEVBRVQsR0F4QkYsU0FBMEJNLEVBQU9OLEdBQy9CLElBQUlPLEVBQ0osR0FBK0IsYUFBM0JQLEVBQUtqQixRQUFRRCxVQUEwQixDQUN6Q3lCLEVBQUlELEVBQU0sR0FDVixJQUFLLElBQUlaLEVBQUksRUFBR0EsRUFBSU0sRUFBS2YsU0FBU0wsT0FBUWMsR0FBSyxFQUM3QyxHQUErQixJQUEzQkQsRUFBTWMsRUFBSWIsR0FBR1ksRUFBTSxJQUNyQixPQUFPLE9BSVgsSUFBSyxJQUFJWixFQUFJLEVBQUdBLEVBQUlNLEVBQUtmLFNBQVNMLE9BQVFjLEdBQUssRUFFN0MsR0FEQWEsRUFBSUQsRUFBTSxHQUNxQixJQUEzQmIsRUFBTWEsRUFBTSxJQUFJQyxFQUFJYixHQUN0QixPQUFPLEVBSWIsT0FBTyxFQU9IYyxDQUFpQmhCLEVBQVVRLEdBQzdCLE9BQU8sRUFHVCxHQUErQixhQUEzQkEsRUFBS2pCLFFBQVFELFVBQTBCLENBQ3pDLElBQUssSUFBSVksRUFBSSxFQUFHQSxFQUFJTSxFQUFLZixTQUFTTCxPQUFRYyxHQUFLLEVBQzdDRCxFQUFNRCxFQUFTLEdBQUtFLEdBQUdlLE9BQU9qQixFQUFTLEdBQUksRUFBRyxHQUdoRCxPQURBTSxFQUFZTixFQUFVUSxJQUNmLEVBS1QsT0FGQVAsRUFBTUQsRUFBUyxJQUFJaUIsT0FBT2pCLEVBQVMsR0FBSVEsRUFBS2YsU0FBU0wsVUFBV29CLEVBQUtmLFVBQ3JFYSxFQUFZTixFQUFVUSxJQUNmLEdBNEM0QlUsY0FackMsU0FBdUJKLEdBQ3JCLE1BQWtDLE1BQTlCYixFQUFNYSxFQUFNLElBQUlBLEVBQU0sTUFHUSxJQUE5QmIsRUFBTWEsRUFBTSxJQUFJQSxFQUFNLEtBQ3hCYixFQUFNYSxFQUFNLElBQUlBLEVBQU0sSUFBTSxJQTFCaEMsU0FBeUJBLEdBQ3ZCLE1BQU1LLEVBQWdCZCxFQUFNZSxRQUFRQyxHQUFTQSxFQUFJOUIsUUFBUVksTUFBUVcsRUFBTSxJQUNsRU8sRUFBSTlCLFFBQVFTLFNBQVNzQixTQUFTUixFQUFNLEtBQ25DTyxFQUFJOUIsUUFBUW1CLFNBQVdJLEVBQU0sSUFDNUJPLEVBQUk5QixRQUFRUyxTQUFTc0IsU0FBU1IsRUFBTSxNQUUzQyxJQUFJUyxFQUNBQyxFQUV1QyxhQUF2Q0wsRUFBYyxHQUFHNUIsUUFBUUQsV0FDM0JpQyxFQUFjSixFQUFjQyxRQUFRQyxHQUFRQSxFQUFJOUIsUUFBUVMsU0FBU3NCLFNBQVNSLEVBQU0sTUFDaEZVLEVBQWtCRCxFQUFZLEdBQUdoQyxRQUFRUyxTQUFTeUIsUUFBUVgsRUFBTSxNQUVoRVMsRUFBY0osRUFBY0MsUUFBUUMsR0FBUUEsRUFBSTlCLFFBQVFTLFNBQVNzQixTQUFTUixFQUFNLE1BQ2hGVSxFQUFrQkQsRUFBWSxHQUFHaEMsUUFBUVMsU0FBU3lCLFFBQVFYLEVBQU0sS0FHbEUsTUFBTSxLQUFFekIsR0FBU2tDLEVBQVksR0FBR2hDLFFBQ2hDLE9BMUJGLFNBQW9CRixFQUFNbUMsR0FDeEIsTUFBTUUsRUFBWXJCLEVBQU1zQixXQUFXbkIsR0FBU0EsRUFBS2pCLFFBQVFGLE9BQVNBLElBQ2xFZ0IsRUFBTXFCLEdBQVczQixJQUFJeUIsR0FDakJuQixFQUFNcUIsR0FBVzlCLFdBQ25CUyxFQUFNcUIsR0FBV25DLFFBQVFDLFFBQVMsR0FzQjdCb0MsQ0FBV3ZDLEVBQU1tQyxHQVNmSyxDQUFnQmYsSUFHbEJiLEVBQU1hLEVBQU0sSUFBSUEsRUFBTSxJQUFNLFFDcEl2QyxFQVZBLFdBT0UsTUFBTyxDQUFFZ0IsVUFOUyxJQU1FQyxPQUpwQixTQUFnQkMsRUFBT2xCLEdBQ3JCLE9BQU9rQixFQUFNRixVQUFVWixjQUFjSixNQ05uQ21CLEVBQVMsQ0FBQ0MsRUFBS0MsSUFBUUMsS0FBS0MsTUFBTUQsS0FBS0gsVUFBWUUsRUFBTUQsSUFBUUEsRUNHdkUsSUFBSUksRUFBVSxJQUNWQyxFQUFVLElBZWQsU0FBU0MsRUFBY0MsRUFBUWpDLEVBQU1rQyxHQUNuQyxNQUFNQyxFQUFZVixFQUFPLEVBQUcsR0FDdEJXLEVBQWVYLEVBQU8sRUFBRyxHQUN6QlksRUFBZUosRUFBT1gsVUFBVWxCLFVBQVUsQ0FBQytCLEVBQVdDLEdBQWVwQyxHQUMzRSxPQUFLa0MsRUFBWXBCLFNBQVMsR0FBR3FCLElBQVlDLE1BQW1CQyxFQUNuRCxDQUFDRixFQUFXQyxHQUVkSixFQUFjQyxFQUFRakMsRUFBTWtDLEdBR3JDLFNBQVNJLEVBQWdCTCxHQUN2QixNQUFNQyxFQUFjLElBcEJ0QixTQUF5QkQsR0FDdkJBLEVBQU9YLFVBQVV6QixNQUFNMEMsU0FBU3ZDLElBRWIsSUFEQXlCLEVBQU8sRUFBRyxLQUV6QnpCLEVBQUtqQixRQUFRRCxVQUFZLGVBaUI3QjBELENBQWdCUCxHQUNoQkEsRUFBT1gsVUFBVXpCLE1BQU0wQyxTQUFTdkMsSUFDOUIsTUFBTXlDLEVBQWNULEVBQWNDLEVBQVFqQyxFQUFNa0MsR0FDaERBLEVBQVl0QyxLQUFLLEdBQUc2QyxFQUFZLEtBQUtBLEVBQVksTUFDakRDLEVBQ0FULEVBQU9YLFVBQVVsQixVQUFVcUMsRUFBYXpDLE1BRzVDc0MsRUFBZ0JQLEdDdkNoQixNQUFNWSxFQUFZQyxTQUFTQyxjQUFjLHdCQUNuQ0MsRUFBaUJGLFNBQVNDLGNBQWMsb0JBQ3hDRSxFQUFXSCxTQUFTQyxjQUFjLFVBQ2xDRyxFQUFZSixTQUFTQyxjQUFjLFdBRW5DSSxHQURRTCxTQUFTTSxpQkFBaUIsUUFDMUJOLFNBQVNNLGlCQUFpQixXQUNsQ0MsRUFBZVAsU0FBU0MsY0FBYyxXQUN0Q08sRUFBU1IsU0FBU0MsY0FBYyxXQUNoQ1EsRUFBWVQsU0FBU0MsY0FBYyxXQzRDekMsRUFsREEsV0FDRSxNQUFNUyxFQUFnQlYsU0FBU1csY0FBYyxPQUN2Q0MsRUFBWVosU0FBU1csY0FBYyxPQUVuQ0UsRUFBZWIsU0FBU1csY0FBYyxNQUM1Q0UsRUFBYUMsWUFBYyxhQUMzQkQsRUFBYUUsVUFBVUMsSUFBSSxhQUMzQixNQUFNQyxFQUFlakIsU0FBU1csY0FBYyxNQUM1Q00sRUFBYUgsWUFBYyxlQUMzQkcsRUFBYUYsVUFBVUMsSUFBSSxhQUUzQk4sRUFBY1EsWUFBWUwsR0FDMUJELEVBQVVNLFlBQVlELEdBRXRCUCxFQUFjSyxVQUFVQyxJQUFJLHlCQUM1Qk4sRUFBY0ssVUFBVUMsSUFBSSxrQkFDNUJKLEVBQVVHLFVBQVVDLElBQUkscUJBQ3hCSixFQUFVRyxVQUFVQyxJQUFJLGtCQUN4QkosRUFBVUcsVUFBVUMsSUFBSSxRQUN4QkosRUFBVUcsVUFBVUMsSUFBSSxhQUN4QixJQUFLLElBQUlsRSxFQUFJLEVBQUdBLEVBQUksR0FBSUEsR0FBSyxFQUFHLENBQzlCLE1BQU1DLEVBQU1pRCxTQUFTVyxjQUFjLE9BQ25DNUQsRUFBSW9FLGFBQWEsS0FBTXJFLEdBQ3ZCQyxFQUFJZ0UsVUFBVUMsSUFBSSxPQUFPbEUsS0FDekJDLEVBQUlnRSxVQUFVQyxJQUFJLE9BRWxCLE1BQU1JLEVBQU9wQixTQUFTVyxjQUFjLE9BQ3BDUyxFQUFLRCxhQUFhLEtBQU1yRSxHQUN4QnNFLEVBQUtMLFVBQVVDLElBQUksU0FBU2xFLEtBQzVCc0UsRUFBS0wsVUFBVUMsSUFBSSxPQUVuQixJQUFLLElBQUlyRCxFQUFJLEVBQUdBLEVBQUksR0FBSUEsR0FBSyxFQUFHLENBQzlCLE1BQU0wRCxFQUFNckIsU0FBU1csY0FBYyxPQUNuQ1UsRUFBSU4sVUFBVUMsSUFBSSxPQUNsQkssRUFBSU4sVUFBVUMsSUFBSSxPQUFPckQsS0FDekIwRCxFQUFJRixhQUFhLFNBQVVyRSxHQUMzQnVFLEVBQUlGLGFBQWEsU0FBVXhELEdBQzNCWixFQUFJbUUsWUFBWUcsR0FFaEIsTUFBTUMsRUFBT3RCLFNBQVNXLGNBQWMsT0FDcENXLEVBQUtQLFVBQVVDLElBQUksT0FDbkJNLEVBQUtQLFVBQVVDLElBQUksU0FBU3JELEtBQzVCeUQsRUFBS0YsWUFBWUksR0FFbkJaLEVBQWNRLFlBQVluRSxHQUMxQjZELEVBQVVNLFlBQVlFLEdBRXhCckIsRUFBVW1CLFlBQVlSLEdBQ3RCWCxFQUFVbUIsWUFBWU4sSUMvQ2xCVyxFQUFpQixHQUN2QixJQU1JQyxFQUNBQyxFQVBBN0UsRUFBVyxFQUNYOEUsR0FBYSxFQUNiQyxHQUFZLEVBQ1pDLEdBQWEsRUFDYkMsR0FBYSxFQUNiQyxHQUFhLEVBSWpCLFNBQVNDLEVBQVVoRixFQUFLTyxHQUN0QixRQUFJUCxFQUFNLEdBQUtBLEVBQU0sR0FBS08sRUFBUyxHQUFLQSxFQUFTLEdBR0osTUFBekM0QixFQUFRUixVQUFVN0IsTUFBTUUsR0FBS08sSUFHNUJpRSxFQUFlckQsU0FBUyxHQUFHbkIsSUFBTU8sTUFXeEMsU0FBUzBFLEVBQVdDLEdBQ0wsY0FBVEEsSUFDRk4sR0FBWSxFQUNaQyxHQUFhLEdBRUYsZUFBVEssSUFDRkwsR0FBYSxFQUNiQyxHQUFhLEdBRUYsZUFBVEksSUFDRkosR0FBYSxFQUNiQyxHQUFhLEdBRUYsZUFBVEcsSUFDRkgsR0FBYSxFQUNiSixHQUFhLEdBR2pCLFNBQVNRLEVBQWdCbkYsRUFBS08sRUFBUTJFLEdBQ3BDLElBQUlFLEdBekJOLFNBQW9CcEYsRUFBS08sR0FDdkIsT0FBNkMsSUFBekM0QixFQUFRUixVQUFVN0IsTUFBTUUsR0FBS08sR0F5QjdCOEUsQ0FBV3JGLEVBQUtPLElBT2xCNkUsRUFBV25DLFNBQVNDLGNBQWMsUUFBUWxELFVBQVlPLEtBQ3REaUUsRUFBZXZFLEtBQUssR0FBR0QsSUFBTU8sS0FDN0JWLEVBQVcsRUFDWHVGLEVBQVNwQixVQUFVQyxJQUFJLEtBQ3ZCZ0IsRUFBV0MsS0FWWDlDLEVBQVFSLE9BQU9PLEVBQVMsQ0FBQ25DLEVBQUtPLElBQzlCaUUsRUFBZXZFLEtBQUssR0FBR0QsSUFBTU8sS0FDN0I2RSxFQUFXbkMsU0FBU0MsY0FBYyxRQUFRbEQsVUFBWU8sS0FDdEQ2RSxFQUFTcEIsVUFBVUMsSUFBSSxLQUN2QnBFLEdBQVksR0FVaEJ5RixlQUFlQyxJQUNiLElBQUl2RixFQUNBTyxFQUVKLEdBQUlxRSxFQUFXLENBR2IsR0FGQTVFLEVBQU15RSxFQUNObEUsRUFBU21FLEVBQWU3RSxFQUNwQm1GLEVBQVVoRixFQUFLTyxHQUNqQixPQUFPNEUsRUFBZ0JuRixFQUFLTyxFQUFRLGFBR3RDMEUsRUFBVyxhQUNYcEYsRUFBVyxFQUNYLEdBQUlnRixFQUFZLENBR2hCLEdBRkE3RSxFQUFNeUUsRUFDTmxFLEVBQVNtRSxFQUFlN0UsRUFDcEJtRixFQUFVaEYsRUFBS08sR0FDakIsT0FBTzRFLEVBQWdCbkYsRUFBS08sRUFBUSxjQUV0QzBFLEVBQVcsY0FDWHBGLEVBQVcsRUFDWCxHQUFJaUYsRUFBWSxDQUdoQixHQUZBOUUsRUFBTXlFLEVBQVk1RSxFQUNsQlUsRUFBU21FLEVBQ0xNLEVBQVVoRixFQUFLTyxHQUNqQixPQUFPNEUsRUFBZ0JuRixFQUFLTyxFQUFRLGNBRXRDMEUsRUFBVyxjQUNYcEYsRUFBVyxFQUNYLEdBQUlrRixFQUFZLENBR2hCLEdBRkEvRSxFQUFNeUUsRUFBWTVFLEVBQ2xCVSxFQUFTbUUsRUFDTE0sRUFBVWhGLEVBQUtPLEdBQ2pCLE9BQU80RSxFQUFnQm5GLEVBQUtPLEVBQVEsY0FFdEMwRSxFQUFXLGNBQ1hwRixFQUFXLEVBRWIsR0FBSThFLEVBQVksQ0FDZCxNQUFNbkMsRUFBWVYsRUFBTyxFQUFHLElBQ3RCVyxFQUFlWCxFQUFPLEVBQUcsSUFDL0IsR0FBSTBDLEVBQWVyRCxTQUFTLEdBQUdxQixJQUFZQyxLQUN6QyxPQUFPOEMsSUFHVGYsRUFBZXZFLEtBQUssR0FBR3VDLElBQVlDLFdBQ3ZCLElKL0dNLElBQUkrQyxTQUFTQyxHQUFZQyxXQUFXRCxFSStHMUMsUUFFWixNQUFNTCxFQUFXbkMsU0FBU0MsY0FBYyxRQUFRVixVQUFrQkMsS0FDVCxJQUFyRE4sRUFBUVIsVUFBVTdCLE1BQU0wQyxHQUFXQyxJQUNyQzJDLEVBQVNwQixVQUFVQyxJQUFJLEtBQ3ZCUSxFQUFZakMsRUFDWmtDLEVBQWVqQyxFQUNmbUMsR0FBWSxFQUNaQyxHQUFhLEVBQ2JDLEdBQWEsRUFDYkMsR0FBYSxFQUNiSixHQUFhLEdBRWJTLEVBQVNwQixVQUFVQyxJQUFJLEtBR3pCN0IsRUFBUVIsT0FBT08sRUFBUyxDQUFDSyxFQUFXQyxJQUd0QyxPQUFPLEVDNUhULFNBQVNrRCxJQUNQLE9BQUl4RCxFQUFRUixVQUFVbkIsWUFDcEJpRCxFQUFPTSxZQUFjLFlBQ3JCUCxFQUFhUSxVQUFVNEIsT0FBTyxTQUN2QixLQUVMeEQsRUFBUVQsVUFBVW5CLGFBQ3BCaUQsRUFBT00sWUFBYyxXQUNyQlAsRUFBYVEsVUFBVTRCLE9BQU8sU0FDdkIsR0FYWCxJQWdCQSxJQUFJQyxHQUFhLEVBRWpCUCxlQUFlUSxJQUliLE9BSEFQLElBQ0FJLElBQ0FFLEdBQWEsRUFDTkEsRUFjVCxTQUFTRSxJQUNQLElBQUssSUFBSWhHLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQzNCLElBQUssSUFBSWEsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLEdBQUssRUFDVyxJQUFsQ3VCLEVBQVFSLFVBQVU3QixNQUFNQyxHQUFHYSxJQUNqQnFDLFNBQVNDLGNBQWMsUUFBUW5ELFVBQVVhLEtBQ2pEb0QsVUFBVUMsSUFBSSxRQU0xQjhCLElDaERBLElBQUlDLEVBQWMsRUFDbEIsTUFpRkEsRUFqRnNCLE1BQ3BCLE1BQU0xQyxFQUFRTCxTQUFTTSxpQkFBaUIsVUFDbEMwQyxFQUFZaEQsU0FBU00saUJBQWlCLFFBRTVDLElBQUloQyxFQUNBMkUsRUF5RUosTUFBTyxDQUFFQyxPQXZFVCxXQUNFN0MsRUFBTVYsU0FBU3ZDLElBQ2JBLEVBQUsrRixpQkFBaUIsWUFBWSxLQUM2QixlQUF6RGpFLEVBQVFSLFVBQVV6QixNQUFNcUIsR0FBV25DLFFBQVFELFdBQzdDZ0QsRUFBUVIsVUFBVXpCLE1BQU1xQixHQUFXbkMsUUFBUUQsVUFBWSxXQUN2RGtCLEVBQUsyRCxVQUFVNEIsT0FBTyxjQUN0QnZGLEVBQUsyRCxVQUFVQyxJQUFJLGNBRW5COUIsRUFBUVIsVUFBVXpCLE1BQU1xQixHQUFXbkMsUUFBUUQsVUFBWSxhQUN2RGtCLEVBQUsyRCxVQUFVNEIsT0FBTyxZQUN0QnZGLEVBQUsyRCxVQUFVQyxJQUFJLHNCQTZEVm9DLEtBdkRqQixTQUFjQyxFQUFRTCxHQUNwQixNQUFNTSxFQUF1QkMsSUFDM0JqRixFQUFZWSxFQUFRUixVQUFVekIsTUFBTXNCLFdBQVduQixHQUFTQSxFQUFLakIsUUFBUUYsT0FBU3NILEVBQUVDLE9BQU9DLFFBQVF4SCxRQUczRnlILEVBQWFILElBQ2pCTixFQUFjTSxFQUFFQyxRQUdaRyxFQUFZSixHQUFNQSxFQUFFSyxpQkFFcEJDLEVBQWFOLElBQ2pCQSxFQUFFSyxpQkFDRkwsRUFBRUMsT0FBT3pDLFVBQVVDLElBQUksVUFHbkI4QyxFQUFhUCxJQUNqQkEsRUFBRUMsT0FBT3pDLFVBQVU0QixPQUFPLFVBR3RCb0IsRUFBWVIsSUFDaEIsTUFBTTdGLEVBQVE2RixFQUFFQyxPQUNWUSxFQUFJQyxPQUFPdkcsRUFBTStGLFFBQVFPLEdBQ3pCRSxFQUFJRCxPQUFPdkcsRUFBTStGLFFBQVFTLEdBRVZoRixFQUFRUixVQUFVbEIsVUFBVSxDQUFDd0csRUFBR0UsR0FBSWhGLEVBQVFSLFVBQVV6QixNQUFNcUIsTUFFL0V5RSxHQUFlLEVBQ2ZFLEVBQVlsQyxVQUFVQyxJQUFJLFNBRVIsSUFBaEIrQixJQUNGNUMsRUFBU1ksVUFBVTRCLE9BQU8sV0FDMUJ4QyxFQUFTWSxVQUFVNEIsT0FBTyxhQUMxQnhDLEVBQVNZLFVBQVVDLElBQUksVUFDdkJkLEVBQWVhLFVBQVVDLElBQUksVUFFN0IrQixFQUFjLEdBR2hCRCxJQUNBUyxFQUFFQyxPQUFPekMsVUFBVTRCLE9BQU8sVUFHNUJVLEVBQU0xRCxTQUFTd0UsSUFDYkEsRUFBS2hCLGlCQUFpQixXQUFZUSxHQUNsQ1EsRUFBS2hCLGlCQUFpQixZQUFhVSxHQUNuQ00sRUFBS2hCLGlCQUFpQixZQUFhVyxHQUNuQ0ssRUFBS2hCLGlCQUFpQixPQUFRWSxNQUdoQzFELEVBQU1WLFNBQVN2QyxJQUNiQSxFQUFLK0YsaUJBQWlCLFlBQWFHLEdBQ25DbEcsRUFBSytGLGlCQUFpQixZQUFhTyxTQTNFbkIsR0NrQ3RCLEVBZkEsWUFWQSxXQUNFLEtBQU8zRCxFQUFVcUUsWUFDZnJFLEVBQVVzRSxZQUFZdEUsRUFBVXFFLFlBU2xDRSxHQUVBLElBRUEsTUFBTWpCLEVBQVFyRCxTQUFTTSxpQkFBaUIsUUFFeEMsRUFBQThDLEtBQW1CQyxHQVZuQmhELEVBQU1WLFNBQVN2QyxHQUFTQSxFQUFLMkQsVUFBVTRCLE9BQU8sVU5kOUN6RCxFQUFVLElBQ1ZDLEVBQVUsSU0wQlZPLEVBQWdCUCxHQXpCaEJlLEVBQWVhLFVBQVU0QixPQUFPLFVBQ2hDcEMsRUFBYVEsVUFBVUMsSUFBSSxRQUMzQlAsRUFBVU0sVUFBVUMsSUFBSSxVSDJIeEJPLEVBQWUxRCxPQUFPLEVBQUcwRCxFQUFldkYsUUFDeENZLEVBQVcsRUFDWDhFLEdBQWEsRUFDYkMsR0FBWSxFQUNaQyxHQUFhLEVBQ2JDLEdBQWEsRUFDYkMsR0FBYSxHSW5JYjNCLEVBQVNnRCxpQkFBaUIsU0FBUyxNSDZDckMsV0FDRSxHQUFJUCxFQUFZLENBQ2QsSUFBSyxJQUFJOUYsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLEdBQUssRUFDM0IsSUFBSyxJQUFJYSxFQUFJLEVBQUdBLEVBQUksR0FBSUEsR0FBSyxFQUNoQnFDLFNBQVNDLGNBQWMsVUFBVW5ELFlBQVlhLEtBRXJEd0YsaUJBQWlCLFNBQVVJLElBQ1UsSUFBbENwRSxFQUFRVCxVQUFVN0IsTUFBTUMsR0FBR2EsR0FDN0I0RixFQUFFQyxPQUFPekMsVUFBVUMsSUFBSSxLQUV2QnVDLEVBQUVDLE9BQU96QyxVQUFVQyxJQUFJLEtBRXpCOUIsRUFBUVAsT0FBT1EsRUFBUyxDQUFDckMsRUFBR2EsSUFDeEIrRSxLQUdKRyxNQUNDLENBQUUwQixNQUFNLElBR2YzQixHQUFhLEdHaEViNEIsR0FFQXJFLEVBQVNZLFVBQVU0QixPQUFPLFVBQzFCeEMsRUFBU1ksVUFBVUMsSUFBSSxXQUN2QmIsRUFBU1ksVUFBVUMsSUFBSSxhQUV2QlAsRUFBVU0sVUFBVTRCLE9BQU8sVUFDM0JsQyxFQUFVTSxVQUFVQyxJQUFJLFdBRXhCLE1BQU1KLEVBQVlaLFNBQVNDLGNBQWMsc0JBQ3pDVyxFQUFVRyxVQUFVNEIsT0FBTyxRQUUzQkYsWUFBVyxLQUNUN0IsRUFBVUcsVUFBVTRCLE9BQU8sYUFDM0IvQixFQUFVRyxVQUFVQyxJQUFJLFlBQ3ZCLFFBR0xQLEVBQVUwQyxpQkFBaUIsU0FBUyxLQUNsQyxJQUNBekQsRUFBZ0JSLEdIQXBCLFdBQ0UsSUFBSyxJQUFJcEMsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLEdBQUssRUFDM0IsSUFBSyxJQUFJYSxFQUFJLEVBQUdBLEVBQUksR0FBSUEsR0FBSyxFQUNXLElBQWxDdUIsRUFBUVIsVUFBVTdCLE1BQU1DLEdBQUdhLElBQ1pxQyxTQUFTQyxjQUFjLFFBQVFuRCxVQUFVYSxLQUNqRG9ELFVBQVVDLElBQUksUUdKM0J5RCxHQUNBdEUsRUFBU1ksVUFBVUMsSUFBSSxVQUN2QmIsRUFBU1ksVUFBVTRCLE9BQU8sV0FDMUJ4QyxFQUFTWSxVQUFVNEIsT0FBTyxhQUMxQnpDLEVBQWVhLFVBQVVDLElBQUksYUFHL0JaLEVBQVUrQyxpQkFBaUIsUUFBUyxHQUVwQyxFQUFBQyxPQUNBLFkiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNoaXBGYWN0b3J5KGxlbmd0aCwgbmFtZSwgZGlyZWN0aW9uID0gJ2hvcml6b250YWwnKSB7XG4gIGNvbnN0IGRldGFpbHMgPSB7XG4gICAgbmFtZSxcbiAgICBkaXJlY3Rpb24sXG4gICAgaXNTdW5rOiBmYWxzZSxcbiAgfTtcblxuICBjb25zdCBzaGlwU2l6ZSA9IG5ldyBBcnJheShsZW5ndGgpLmZpbGwoMSk7XG5cbiAgZnVuY3Rpb24gaXNTaW5rKCkge1xuICAgIGlmIChzaGlwU2l6ZS5ldmVyeSgocGFydCkgPT4gcGFydCA9PT0gJ1gnKSkge1xuICAgICAgZGV0YWlscy5pc1N1bmsgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpdChwb3NpdGlvbikge1xuICAgIGlmIChpc1NpbmsoKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHNoaXBTaXplW3Bvc2l0aW9uXSA9ICdYJztcbiAgICByZXR1cm4gc2hpcFNpemU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGRldGFpbHMsXG4gICAgaGl0LFxuICAgIGlzU2luayxcbiAgICBzaGlwU2l6ZSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc2hpcEZhY3Rvcnk7XG4iLCJpbXBvcnQgc2hpcEZhY3RvcnkgZnJvbSAnLi9zaGlwRmFjdG9yeSc7XG5cbmZ1bmN0aW9uIGdhbWVib2FyZEZhY3RvcnkoKSB7XG4gIGNvbnN0IGJvYXJkID0gW107XG4gIC8vIFRvIGNyZWF0ZSBnYW1lYm9hcmRcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgY29uc3Qgcm93ID0gbmV3IEFycmF5KDEwKS5maWxsKDApO1xuICAgIGJvYXJkLnB1c2gocm93KTtcbiAgfVxuXG4gIC8vIFRlYW1zIGVudGlyZSBmbGVldFxuICBjb25zdCBjYXJyaWVyID0gc2hpcEZhY3RvcnkoNSwgJ2NhcnJpZXInKTtcbiAgY29uc3QgYmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KDQsICdiYXR0bGVzaGlwJyk7XG4gIGNvbnN0IGNydWlzZXIgPSBzaGlwRmFjdG9yeSgzLCAnY3J1aXNlcicpO1xuICBjb25zdCBkZXN0cm95ZXIxID0gc2hpcEZhY3RvcnkoMiwgJ2Rlc3Ryb3llcjEnKTtcbiAgY29uc3QgZGVzdHJveWVyMiA9IHNoaXBGYWN0b3J5KDIsICdkZXN0cm95ZXIyJyk7XG5cbiAgLy8gU2F2aW5nIHRoZW0gaW4gYXJyYXkgZm9yIGFjY2Vzc2luZyB0aGVtIG1vcmUgZWFzaWx5IGFuZCBlZGl0IHRoZW1cbiAgY29uc3QgZmxlZXQgPSBbXG4gICAgY2FycmllcixcbiAgICBiYXR0bGVzaGlwLFxuICAgIGNydWlzZXIsXG4gICAgZGVzdHJveWVyMSxcbiAgICBkZXN0cm95ZXIyLFxuICBdO1xuXG4gIGZ1bmN0aW9uIGdhbWVvdmVyKCkge1xuICAgIGlmIChmbGVldC5ldmVyeSgoc2hpcCkgPT4gc2hpcC5kZXRhaWxzLmlzU3VuayA9PT0gdHJ1ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gUmVjb3JkaW5nIHNoaXAncyBsb2NhdGlvbiBmb3IgcmVjZWl2ZSBjb3JyZWN0IGhpdCBsb2NhdGlvblxuICBmdW5jdGlvbiByZWNvcmRTaGlwcyhzaGlwUG9zaXRpb24sIHNoaXApIHtcbiAgICBjb25zdCByZWNvcmRUaGVTaGlwID0gc2hpcDtcblxuICAgIHJlY29yZFRoZVNoaXAuZGV0YWlscy5wb3NpdGlvbiA9IFtdO1xuXG4gICAgaWYgKHNoaXAuZGV0YWlscy5kaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgIHJlY29yZFRoZVNoaXAuZGV0YWlscy5jb2x1bW4gPSBzaGlwUG9zaXRpb25bMV07XG4gICAgICBsZXQgcm93ID0gc2hpcFBvc2l0aW9uWzBdO1xuICAgICAgd2hpbGUgKHJlY29yZFRoZVNoaXAuZGV0YWlscy5wb3NpdGlvbi5sZW5ndGggPCByZWNvcmRUaGVTaGlwLnNoaXBTaXplLmxlbmd0aCkge1xuICAgICAgICByZWNvcmRUaGVTaGlwLmRldGFpbHMucG9zaXRpb24ucHVzaChyb3cpO1xuICAgICAgICByb3cgKz0gMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVjb3JkVGhlU2hpcC5kZXRhaWxzLnJvdyA9IHNoaXBQb3NpdGlvblswXTtcbiAgICAgIGxldCBjb2x1bW4gPSBzaGlwUG9zaXRpb25bMV07XG4gICAgICB3aGlsZSAocmVjb3JkVGhlU2hpcC5kZXRhaWxzLnBvc2l0aW9uLmxlbmd0aCA8IHJlY29yZFRoZVNoaXAuc2hpcFNpemUubGVuZ3RoKSB7XG4gICAgICAgIHJlY29yZFRoZVNoaXAuZGV0YWlscy5wb3NpdGlvbi5wdXNoKGNvbHVtbik7XG4gICAgICAgIGNvbHVtbiArPSAxO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBQcmV2ZW50aW5nIGJvYXJkIGVsZW1lbnRzIHRvIGJlIG1vcmUgdGhhbiAxMFxuICBmdW5jdGlvbiBwcmV2ZW50T3ZlckV4dGVuZChwb3NpdGlvbiwgc2hpcCkge1xuICAgIGlmIChzaGlwLmRldGFpbHMuZGlyZWN0aW9uID09PSAndmVydGljYWwnICYmIHBvc2l0aW9uWzBdICsgc2hpcC5zaGlwU2l6ZS5sZW5ndGggPiAxMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBpZiAoc2hpcC5kZXRhaWxzLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnICYmIHBvc2l0aW9uWzFdICsgc2hpcC5zaGlwU2l6ZS5sZW5ndGggPiAxMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIENoZWNraW5nIGNvb3JkaW5hdGVzIGlmIHRoZXJlIGlzIGEgc2hpcCBhbHJlYWR5XG4gIGZ1bmN0aW9uIGNoZWNrQ29vcmRpbmF0ZXMoY29vcmQsIHNoaXApIHtcbiAgICBsZXQgajtcbiAgICBpZiAoc2hpcC5kZXRhaWxzLmRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgaiA9IGNvb3JkWzBdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLnNoaXBTaXplLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChib2FyZFtqICsgaV1bY29vcmRbMV1dID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLnNoaXBTaXplLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGogPSBjb29yZFsxXTtcbiAgICAgICAgaWYgKGJvYXJkW2Nvb3JkWzBdXVtqICsgaV0gPT09IDEpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBwbGFjZVNoaXAocG9zaXRpb24sIHNoaXApIHtcbiAgICBpZiAocHJldmVudE92ZXJFeHRlbmQocG9zaXRpb24sIHNoaXApKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChjaGVja0Nvb3JkaW5hdGVzKHBvc2l0aW9uLCBzaGlwKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChzaGlwLmRldGFpbHMuZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAuc2hpcFNpemUubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYm9hcmRbcG9zaXRpb25bMF0gKyBpXS5zcGxpY2UocG9zaXRpb25bMV0sIDEsIDEpO1xuICAgICAgfVxuICAgICAgcmVjb3JkU2hpcHMocG9zaXRpb24sIHNoaXAsICd2ZXJ0aWNhbCcpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgYm9hcmRbcG9zaXRpb25bMF1dLnNwbGljZShwb3NpdGlvblsxXSwgc2hpcC5zaGlwU2l6ZS5sZW5ndGgsIC4uLnNoaXAuc2hpcFNpemUpO1xuICAgIHJlY29yZFNoaXBzKHBvc2l0aW9uLCBzaGlwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpdFRoZVNoaXAobmFtZSwgZGFtYWdlZFBvc2l0aW9uKSB7XG4gICAgY29uc3Qgc2hpcEluZGV4ID0gZmxlZXQuZmluZEluZGV4KChzaGlwKSA9PiBzaGlwLmRldGFpbHMubmFtZSA9PT0gbmFtZSk7XG4gICAgZmxlZXRbc2hpcEluZGV4XS5oaXQoZGFtYWdlZFBvc2l0aW9uKTtcbiAgICBpZiAoZmxlZXRbc2hpcEluZGV4XS5pc1NpbmsoKSkge1xuICAgICAgZmxlZXRbc2hpcEluZGV4XS5kZXRhaWxzLmlzU3VuayA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FsY3VsYXRlSGl0TG9jKGNvb3JkKSB7XG4gICAgY29uc3QgcmVjZWl2ZWRDb29yZCA9IGZsZWV0LmZpbHRlcigodmFsKSA9PiAodmFsLmRldGFpbHMucm93ID09PSBjb29yZFswXVxuICAgICAgJiYgdmFsLmRldGFpbHMucG9zaXRpb24uaW5jbHVkZXMoY29vcmRbMV0pKVxuICAgICAgfHwgKHZhbC5kZXRhaWxzLmNvbHVtbiA9PT0gY29vcmRbMV1cbiAgICAgICAgJiYgdmFsLmRldGFpbHMucG9zaXRpb24uaW5jbHVkZXMoY29vcmRbMF0pKSk7XG5cbiAgICBsZXQgZGFtYWdlZFNoaXA7XG4gICAgbGV0IGRhbWFnZWRQb3NpdGlvbjtcblxuICAgIGlmIChyZWNlaXZlZENvb3JkWzBdLmRldGFpbHMuZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICBkYW1hZ2VkU2hpcCA9IHJlY2VpdmVkQ29vcmQuZmlsdGVyKCh2YWwpID0+IHZhbC5kZXRhaWxzLnBvc2l0aW9uLmluY2x1ZGVzKGNvb3JkWzBdKSk7XG4gICAgICBkYW1hZ2VkUG9zaXRpb24gPSBkYW1hZ2VkU2hpcFswXS5kZXRhaWxzLnBvc2l0aW9uLmluZGV4T2YoY29vcmRbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYW1hZ2VkU2hpcCA9IHJlY2VpdmVkQ29vcmQuZmlsdGVyKCh2YWwpID0+IHZhbC5kZXRhaWxzLnBvc2l0aW9uLmluY2x1ZGVzKGNvb3JkWzFdKSk7XG4gICAgICBkYW1hZ2VkUG9zaXRpb24gPSBkYW1hZ2VkU2hpcFswXS5kZXRhaWxzLnBvc2l0aW9uLmluZGV4T2YoY29vcmRbMV0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbmFtZSB9ID0gZGFtYWdlZFNoaXBbMF0uZGV0YWlscztcbiAgICByZXR1cm4gaGl0VGhlU2hpcChuYW1lLCBkYW1hZ2VkUG9zaXRpb24pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVjZWl2ZUF0dGFjayhjb29yZCkge1xuICAgIGlmIChib2FyZFtjb29yZFswXV1bY29vcmRbMV1dID09PSAnIycpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGJvYXJkW2Nvb3JkWzBdXVtjb29yZFsxXV0gPT09IDEpIHtcbiAgICAgIGJvYXJkW2Nvb3JkWzBdXVtjb29yZFsxXV0gPSAnIyc7XG4gICAgICByZXR1cm4gY2FsY3VsYXRlSGl0TG9jKGNvb3JkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9hcmRbY29vcmRbMF1dW2Nvb3JkWzFdXSA9ICcjJztcbiAgfVxuICByZXR1cm4ge1xuICAgIGJvYXJkLCBnYW1lb3ZlciwgZmxlZXQsIHBsYWNlU2hpcCwgcmVjZWl2ZUF0dGFjayxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2FtZWJvYXJkRmFjdG9yeTtcbiIsImltcG9ydCBnYW1lYm9hcmRGYWN0b3J5IGZyb20gJy4vZ2FtZWJvYXJkRmFjdG9yeSc7XG5cbmZ1bmN0aW9uIFBsYXllcigpIHtcbiAgY29uc3QgZ2FtZWJvYXJkID0gZ2FtZWJvYXJkRmFjdG9yeSgpO1xuXG4gIGZ1bmN0aW9uIGF0dGFjayhlbmVteSwgY29vcmQpIHtcbiAgICByZXR1cm4gZW5lbXkuZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmQpO1xuICB9XG5cbiAgcmV0dXJuIHsgZ2FtZWJvYXJkLCBhdHRhY2sgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGxheWVyO1xuIiwiY29uc3QgcmFuZG9tID0gKG1pbiwgbWF4KSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XG5jb25zdCBzbGVlcCA9IChtcykgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbmV4cG9ydCB7IHJhbmRvbSwgc2xlZXAgfTtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9GYWN0b3JpZXMvUGxheWVyJztcbmltcG9ydCB7IHJhbmRvbSB9IGZyb20gJy4vaGVscGVycyc7XG5cbmxldCBwbGF5ZXIxID0gUGxheWVyKCk7XG5sZXQgcGxheWVyMiA9IFBsYXllcigpO1xuXG5mdW5jdGlvbiByZXNldFBsYXllcnMoKSB7XG4gIHBsYXllcjEgPSBQbGF5ZXIoKTtcbiAgcGxheWVyMiA9IFBsYXllcih0cnVlKTtcbn1cbmZ1bmN0aW9uIHJhbmRvbURpcmVjdGlvbihwbGF5ZXIpIHtcbiAgcGxheWVyLmdhbWVib2FyZC5mbGVldC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgY29uc3QgcG9zaXRpb24gPSByYW5kb20oMCwgMik7XG4gICAgaWYgKHBvc2l0aW9uID09PSAxKSB7XG4gICAgICBzaGlwLmRldGFpbHMuZGlyZWN0aW9uID0gJ3ZlcnRpY2FsJztcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByYW5kb21OdW1iZXJzKHBsYXllciwgc2hpcCwgcGxhY2VkQ29vcmQpIHtcbiAgY29uc3QgcmFuZG9tUm93ID0gcmFuZG9tKDAsIDkpO1xuICBjb25zdCByYW5kb21Db2x1bW4gPSByYW5kb20oMCwgOSk7XG4gIGNvbnN0IHByb3BlclBsYWNlZCA9IHBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKFtyYW5kb21Sb3csIHJhbmRvbUNvbHVtbl0sIHNoaXApO1xuICBpZiAoIXBsYWNlZENvb3JkLmluY2x1ZGVzKGAke3JhbmRvbVJvd30ke3JhbmRvbUNvbHVtbn1gKSAmJiBwcm9wZXJQbGFjZWQpIHtcbiAgICByZXR1cm4gW3JhbmRvbVJvdywgcmFuZG9tQ29sdW1uXTtcbiAgfVxuICByZXR1cm4gcmFuZG9tTnVtYmVycyhwbGF5ZXIsIHNoaXAsIHBsYWNlZENvb3JkKTtcbn1cblxuZnVuY3Rpb24gcmFuZG9tUGxhY2VtZW50KHBsYXllcikge1xuICBjb25zdCBwbGFjZWRDb29yZCA9IFtdO1xuICByYW5kb21EaXJlY3Rpb24ocGxheWVyKTtcbiAgcGxheWVyLmdhbWVib2FyZC5mbGVldC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgY29uc3QgcmFuZG9tQ29vcmQgPSByYW5kb21OdW1iZXJzKHBsYXllciwgc2hpcCwgcGxhY2VkQ29vcmQpO1xuICAgIHBsYWNlZENvb3JkLnB1c2goYCR7cmFuZG9tQ29vcmRbMF19JHtyYW5kb21Db29yZFsxXX1gKTtcbiAgICBjO1xuICAgIHBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKHJhbmRvbUNvb3JkLCBzaGlwKTtcbiAgfSk7XG59XG5yYW5kb21QbGFjZW1lbnQocGxheWVyMik7XG5leHBvcnQge1xuICBwbGF5ZXIxLCBwbGF5ZXIyLCByZXNldFBsYXllcnMsIHJhbmRvbVBsYWNlbWVudCxcbn07XG4iLCJjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZC1tYWluLWNvbnRhaW5lcicpO1xuY29uc3QgZmxlZXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmxlZXQtY29udGFpbmVyJyk7XG5jb25zdCBzdGFydEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydCcpO1xuY29uc3QgcmVuZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlbmRlcicpO1xuY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYm94Jyk7XG5jb25zdCBzaGlwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaGlwcycpO1xuY29uc3QgcmVzdWx0U2NyZWVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc3VsdCcpO1xuY29uc3Qgd2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpbm5lcicpO1xuY29uc3QgcmFuZG9tQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJhbmRvbScpO1xuZXhwb3J0IHtcbiAgY29udGFpbmVyLCBmbGVldENvbnRhaW5lciwgc3RhcnRCdG4sIHJlbmRlckJ0biwgY2VsbHMsIHNoaXBzLCByZXN1bHRTY3JlZW4sIHdpbm5lciwgcmFuZG9tQnRuLFxufTtcbiIsImltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuXG5mdW5jdGlvbiBjcmVhdGVHcmlkKCkge1xuICBjb25zdCBwbGF5ZXJNYWluRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IGFpTWFpbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IHBsYXllcjFCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gIHBsYXllcjFCb2FyZC50ZXh0Q29udGVudCA9ICdZb3VyIEJvYXJkJztcbiAgcGxheWVyMUJvYXJkLmNsYXNzTGlzdC5hZGQoJ2dyaWQtbmFtZScpO1xuICBjb25zdCBwbGF5ZXIyQm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xuICBwbGF5ZXIyQm9hcmQudGV4dENvbnRlbnQgPSAnRW5lbWV5IEJvYXJkJztcbiAgcGxheWVyMkJvYXJkLmNsYXNzTGlzdC5hZGQoJ2dyaWQtbmFtZScpO1xuXG4gIHBsYXllck1haW5EaXYuYXBwZW5kQ2hpbGQocGxheWVyMUJvYXJkKTtcbiAgYWlNYWluRGl2LmFwcGVuZENoaWxkKHBsYXllcjJCb2FyZCk7XG5cbiAgcGxheWVyTWFpbkRpdi5jbGFzc0xpc3QuYWRkKCdwbGF5ZXItZ3JpZC1jb250YWluZXInKTtcbiAgcGxheWVyTWFpbkRpdi5jbGFzc0xpc3QuYWRkKCdncmlkLWNvbnRhaW5lcicpO1xuICBhaU1haW5EaXYuY2xhc3NMaXN0LmFkZCgnYWktZ3JpZC1jb250YWluZXInKTtcbiAgYWlNYWluRGl2LmNsYXNzTGlzdC5hZGQoJ2dyaWQtY29udGFpbmVyJyk7XG4gIGFpTWFpbkRpdi5jbGFzc0xpc3QuYWRkKCdub25lJyk7XG4gIGFpTWFpbkRpdi5jbGFzc0xpc3QuYWRkKCdpbnZpc2libGUnKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93LnNldEF0dHJpYnV0ZSgnaWQnLCBpKTtcbiAgICByb3cuY2xhc3NMaXN0LmFkZChgcm93LSR7aX1gKTtcbiAgICByb3cuY2xhc3NMaXN0LmFkZCgncm93Jyk7XG5cbiAgICBjb25zdCByb3cyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93Mi5zZXRBdHRyaWJ1dGUoJ2lkJywgaSk7XG4gICAgcm93Mi5jbGFzc0xpc3QuYWRkKGByb3ctMi0ke2l9YCk7XG4gICAgcm93Mi5jbGFzc0xpc3QuYWRkKCdyb3cnKTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgY29uc3QgY29sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb2wuY2xhc3NMaXN0LmFkZCgnYm94Jyk7XG4gICAgICBjb2wuY2xhc3NMaXN0LmFkZChgYm94LSR7an1gKTtcbiAgICAgIGNvbC5zZXRBdHRyaWJ1dGUoJ2RhdGEteScsIGkpO1xuICAgICAgY29sLnNldEF0dHJpYnV0ZSgnZGF0YS14Jywgaik7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQoY29sKTtcblxuICAgICAgY29uc3QgY29sMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29sMi5jbGFzc0xpc3QuYWRkKCdib3gnKTtcbiAgICAgIGNvbDIuY2xhc3NMaXN0LmFkZChgYm94LTItJHtqfWApO1xuICAgICAgcm93Mi5hcHBlbmRDaGlsZChjb2wyKTtcbiAgICB9XG4gICAgcGxheWVyTWFpbkRpdi5hcHBlbmRDaGlsZChyb3cpO1xuICAgIGFpTWFpbkRpdi5hcHBlbmRDaGlsZChyb3cyKTtcbiAgfVxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQocGxheWVyTWFpbkRpdik7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhaU1haW5EaXYpO1xufVxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlR3JpZDtcbiIsImltcG9ydCB7IHJhbmRvbSwgc2xlZXAgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgcGxheWVyMSwgcGxheWVyMiB9IGZyb20gJy4vcGxheWVycyc7XG5cbmNvbnN0IHJhbmRvbUhpdENvb3JkID0gW107XG5sZXQgcG9zaXRpb24gPSAxO1xubGV0IHJhbmRvbVNob3QgPSB0cnVlO1xubGV0IGF4aXNYTGVmdCA9IGZhbHNlO1xubGV0IGF4aXNYUmlnaHQgPSBmYWxzZTtcbmxldCBheGlzWVVwcGVyID0gZmFsc2U7XG5sZXQgYXhpc1lCZWxvdyA9IGZhbHNlO1xubGV0IGNvcnJlY1JvdztcbmxldCBjb3JyZWNDb2x1bW47XG5cbmZ1bmN0aW9uIHByb3BlckhpdChyb3csIGNvbHVtbikge1xuICBpZiAocm93ID4gOSB8fCByb3cgPCAwIHx8IGNvbHVtbiA+IDkgfHwgY29sdW1uIDwgMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAocGxheWVyMS5nYW1lYm9hcmQuYm9hcmRbcm93XVtjb2x1bW5dID09PSAnIycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKChyYW5kb21IaXRDb29yZC5pbmNsdWRlcyhgJHtyb3d9JHtjb2x1bW59YCkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gY29ycmVjdEhpdChyb3csIGNvbHVtbikge1xuICBpZiAocGxheWVyMS5nYW1lYm9hcmQuYm9hcmRbcm93XVtjb2x1bW5dID09PSAxKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gY2hhbmdlQXhpcyhheGlzKSB7XG4gIGlmIChheGlzID09PSAnYXhpc1hMZWZ0Jykge1xuICAgIGF4aXNYTGVmdCA9IGZhbHNlO1xuICAgIGF4aXNYUmlnaHQgPSB0cnVlO1xuICB9XG4gIGlmIChheGlzID09PSAnYXhpc1hSaWdodCcpIHtcbiAgICBheGlzWFJpZ2h0ID0gZmFsc2U7XG4gICAgYXhpc1lVcHBlciA9IHRydWU7XG4gIH1cbiAgaWYgKGF4aXMgPT09ICdheGlzWVVwcGVyJykge1xuICAgIGF4aXNZVXBwZXIgPSBmYWxzZTtcbiAgICBheGlzWUJlbG93ID0gdHJ1ZTtcbiAgfVxuICBpZiAoYXhpcyA9PT0gJ2F4aXNZQmVsb3cnKSB7XG4gICAgYXhpc1lCZWxvdyA9IGZhbHNlO1xuICAgIHJhbmRvbVNob3QgPSB0cnVlO1xuICB9XG59XG5mdW5jdGlvbiBtYXJrSGl0TG9jYXRpb24ocm93LCBjb2x1bW4sIGF4aXMpIHtcbiAgbGV0IGlubmVyRGl2O1xuICBpZiAoY29ycmVjdEhpdChyb3csIGNvbHVtbikpIHtcbiAgICBwbGF5ZXIyLmF0dGFjayhwbGF5ZXIxLCBbcm93LCBjb2x1bW5dKTtcbiAgICByYW5kb21IaXRDb29yZC5wdXNoKGAke3Jvd30ke2NvbHVtbn1gKTtcbiAgICBpbm5lckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5yb3ctJHtyb3d9IC5ib3gtJHtjb2x1bW59YCk7XG4gICAgaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgneCcpO1xuICAgIHBvc2l0aW9uICs9IDE7XG4gIH0gZWxzZSB7XG4gICAgaW5uZXJEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucm93LSR7cm93fSAuYm94LSR7Y29sdW1ufWApO1xuICAgIHJhbmRvbUhpdENvb3JkLnB1c2goYCR7cm93fSR7Y29sdW1ufWApO1xuICAgIHBvc2l0aW9uID0gMTtcbiAgICBpbm5lckRpdi5jbGFzc0xpc3QuYWRkKCdvJyk7XG4gICAgY2hhbmdlQXhpcyhheGlzKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBhaUhpdCgpIHtcbiAgbGV0IHJvdztcbiAgbGV0IGNvbHVtbjtcblxuICBpZiAoYXhpc1hMZWZ0KSB7XG4gICAgcm93ID0gY29ycmVjUm93O1xuICAgIGNvbHVtbiA9IGNvcnJlY0NvbHVtbiArIHBvc2l0aW9uO1xuICAgIGlmIChwcm9wZXJIaXQocm93LCBjb2x1bW4pKSB7XG4gICAgICByZXR1cm4gbWFya0hpdExvY2F0aW9uKHJvdywgY29sdW1uLCAnYXhpc1hMZWZ0Jyk7XG4gICAgICAvLyBoYW5naSB5b251biBmYWxzZSB0cnVlIG9sY2FnaW5pIGF5YXJsYW1hbSBsYXppbS5cbiAgICB9XG4gICAgY2hhbmdlQXhpcygnYXhpc1hMZWZ0Jyk7XG4gICAgcG9zaXRpb24gPSAxO1xuICB9IGlmIChheGlzWFJpZ2h0KSB7XG4gICAgcm93ID0gY29ycmVjUm93O1xuICAgIGNvbHVtbiA9IGNvcnJlY0NvbHVtbiAtIHBvc2l0aW9uO1xuICAgIGlmIChwcm9wZXJIaXQocm93LCBjb2x1bW4pKSB7XG4gICAgICByZXR1cm4gbWFya0hpdExvY2F0aW9uKHJvdywgY29sdW1uLCAnYXhpc1hSaWdodCcpO1xuICAgIH1cbiAgICBjaGFuZ2VBeGlzKCdheGlzWFJpZ2h0Jyk7XG4gICAgcG9zaXRpb24gPSAxO1xuICB9IGlmIChheGlzWVVwcGVyKSB7XG4gICAgcm93ID0gY29ycmVjUm93IC0gcG9zaXRpb247XG4gICAgY29sdW1uID0gY29ycmVjQ29sdW1uO1xuICAgIGlmIChwcm9wZXJIaXQocm93LCBjb2x1bW4pKSB7XG4gICAgICByZXR1cm4gbWFya0hpdExvY2F0aW9uKHJvdywgY29sdW1uLCAnYXhpc1lVcHBlcicpO1xuICAgIH1cbiAgICBjaGFuZ2VBeGlzKCdheGlzWVVwcGVyJyk7XG4gICAgcG9zaXRpb24gPSAxO1xuICB9IGlmIChheGlzWUJlbG93KSB7XG4gICAgcm93ID0gY29ycmVjUm93ICsgcG9zaXRpb247XG4gICAgY29sdW1uID0gY29ycmVjQ29sdW1uO1xuICAgIGlmIChwcm9wZXJIaXQocm93LCBjb2x1bW4pKSB7XG4gICAgICByZXR1cm4gbWFya0hpdExvY2F0aW9uKHJvdywgY29sdW1uLCAnYXhpc1lCZWxvdycpO1xuICAgIH1cbiAgICBjaGFuZ2VBeGlzKCdheGlzWUJlbG93Jyk7XG4gICAgcG9zaXRpb24gPSAxO1xuICB9XG4gIGlmIChyYW5kb21TaG90KSB7XG4gICAgY29uc3QgcmFuZG9tUm93ID0gcmFuZG9tKDAsIDEwKTtcbiAgICBjb25zdCByYW5kb21Db2x1bW4gPSByYW5kb20oMCwgMTApO1xuICAgIGlmIChyYW5kb21IaXRDb29yZC5pbmNsdWRlcyhgJHtyYW5kb21Sb3d9JHtyYW5kb21Db2x1bW59YCkpIHtcbiAgICAgIHJldHVybiBhaUhpdCgpO1xuICAgIH1cblxuICAgIHJhbmRvbUhpdENvb3JkLnB1c2goYCR7cmFuZG9tUm93fSR7cmFuZG9tQ29sdW1ufWApO1xuICAgIGF3YWl0IHNsZWVwKDMwMCk7XG5cbiAgICBjb25zdCBpbm5lckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5yb3ctJHtyYW5kb21Sb3d9IC5ib3gtJHtyYW5kb21Db2x1bW59YCk7XG4gICAgaWYgKHBsYXllcjEuZ2FtZWJvYXJkLmJvYXJkW3JhbmRvbVJvd11bcmFuZG9tQ29sdW1uXSA9PT0gMSkge1xuICAgICAgaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgneCcpO1xuICAgICAgY29ycmVjUm93ID0gcmFuZG9tUm93O1xuICAgICAgY29ycmVjQ29sdW1uID0gcmFuZG9tQ29sdW1uO1xuICAgICAgYXhpc1hMZWZ0ID0gdHJ1ZTtcbiAgICAgIGF4aXNYUmlnaHQgPSBmYWxzZTtcbiAgICAgIGF4aXNZVXBwZXIgPSBmYWxzZTtcbiAgICAgIGF4aXNZQmVsb3cgPSBmYWxzZTtcbiAgICAgIHJhbmRvbVNob3QgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgnbycpO1xuICAgIH1cblxuICAgIHBsYXllcjIuYXR0YWNrKHBsYXllcjEsIFtyYW5kb21Sb3csIHJhbmRvbUNvbHVtbl0pO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBhaVJlc2V0KCkge1xuICByYW5kb21IaXRDb29yZC5zcGxpY2UoMCwgcmFuZG9tSGl0Q29vcmQubGVuZ3RoKTtcbiAgcG9zaXRpb24gPSAxO1xuICByYW5kb21TaG90ID0gdHJ1ZTtcbiAgYXhpc1hMZWZ0ID0gZmFsc2U7XG4gIGF4aXNYUmlnaHQgPSBmYWxzZTtcbiAgYXhpc1lVcHBlciA9IGZhbHNlO1xuICBheGlzWUJlbG93ID0gZmFsc2U7XG59XG5leHBvcnQgeyBhaUhpdCwgYWlSZXNldCB9O1xuIiwiaW1wb3J0IHsgcGxheWVyMSwgcGxheWVyMiB9IGZyb20gJy4vcGxheWVycyc7XG5pbXBvcnQgY3JlYXRlR3JpZCBmcm9tICcuL2dyaWQnO1xuaW1wb3J0IHsgcmVzdWx0U2NyZWVuLCB3aW5uZXIgfSBmcm9tICcuL2RvbUVsZW1lbnRzJztcbmltcG9ydCB7IGFpSGl0IH0gZnJvbSAnLi9haSc7XG5cbmNyZWF0ZUdyaWQoKTtcblxuZnVuY3Rpb24gY2hlY2tHYW1lb3ZlcigpIHtcbiAgaWYgKHBsYXllcjEuZ2FtZWJvYXJkLmdhbWVvdmVyKCkpIHtcbiAgICB3aW5uZXIudGV4dENvbnRlbnQgPSAnWW91IGxvc2UhJztcbiAgICByZXN1bHRTY3JlZW4uY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChwbGF5ZXIyLmdhbWVib2FyZC5nYW1lb3ZlcigpKSB7XG4gICAgd2lubmVyLnRleHRDb250ZW50ID0gJ1lvdSB3aW4hJztcbiAgICByZXN1bHRTY3JlZW4uY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubGV0IHBsYXllclR1cm4gPSB0cnVlO1xuXG5hc3luYyBmdW5jdGlvbiByYW5kb21IaXQoKSB7XG4gIGFpSGl0KCk7XG4gIGNoZWNrR2FtZW92ZXIoKTtcbiAgcGxheWVyVHVybiA9IHRydWU7XG4gIHJldHVybiBwbGF5ZXJUdXJuO1xufVxuXG5mdW5jdGlvbiBtYXJrUmFuZG9tUGxhY2VtZW50KCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqICs9IDEpIHtcbiAgICAgIGlmIChwbGF5ZXIxLmdhbWVib2FyZC5ib2FyZFtpXVtqXSA9PT0gMSkge1xuICAgICAgICBjb25zdCBpbm5lckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5yb3ctJHtpfSAuYm94LSR7an1gKTtcbiAgICAgICAgaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgnbWFyaycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBtYXJrU2hpcERpdnMoKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgaWYgKHBsYXllcjEuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdID09PSAxKSB7XG4gICAgICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5yb3ctJHtpfSAuYm94LSR7an1gKTtcbiAgICAgICAgYm94LmNsYXNzTGlzdC5hZGQoJ21hcmsnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubWFya1NoaXBEaXZzKCk7XG5cbmZ1bmN0aW9uIGhpdEV2ZW50KCkge1xuICBpZiAocGxheWVyVHVybikge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaiArPSAxKSB7XG4gICAgICAgIGNvbnN0IGFxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnJvdy0yLSR7aX0gLmJveC0yLSR7an1gKTtcblxuICAgICAgICBhcS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgaWYgKHBsYXllcjIuZ2FtZWJvYXJkLmJvYXJkW2ldW2pdID09PSAxKSB7XG4gICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCd4Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ28nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGxheWVyMS5hdHRhY2socGxheWVyMiwgW2ksIGpdKTtcbiAgICAgICAgICBpZiAoY2hlY2tHYW1lb3ZlcigpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHJhbmRvbUhpdCgpO1xuICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHBsYXllclR1cm4gPSBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBoaXRFdmVudCwgbWFya1NoaXBEaXZzLCBtYXJrUmFuZG9tUGxhY2VtZW50LFxufTtcbiIsImltcG9ydCB7IHBsYXllcjEgfSBmcm9tICcuL3BsYXllcnMnO1xuaW1wb3J0IHsgbWFya1NoaXBEaXZzIH0gZnJvbSAnLi9nYW1lJztcbmltcG9ydCB7IHN0YXJ0QnRuLCBmbGVldENvbnRhaW5lciB9IGZyb20gJy4vZG9tRWxlbWVudHMnO1xuXG5sZXQgc2hpcE9uQm9hcmQgPSAwO1xuY29uc3QgZHJhZ0FuZFJvdGF0ZSA9ICgoKSA9PiB7XG4gIGNvbnN0IHNoaXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNoaXBzJyk7XG4gIGNvbnN0IGdyaWRDZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib3gnKTtcblxuICBsZXQgc2hpcEluZGV4O1xuICBsZXQgZHJhZ2dlZFNoaXA7XG5cbiAgZnVuY3Rpb24gcm90YXRlKCkge1xuICAgIHNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmIChwbGF5ZXIxLmdhbWVib2FyZC5mbGVldFtzaGlwSW5kZXhdLmRldGFpbHMuZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICBwbGF5ZXIxLmdhbWVib2FyZC5mbGVldFtzaGlwSW5kZXhdLmRldGFpbHMuZGlyZWN0aW9uID0gJ3ZlcnRpY2FsJztcbiAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5yZW1vdmUoJ2hvcml6b250YWwnKTtcbiAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoJ3ZlcnRpY2FsJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGxheWVyMS5nYW1lYm9hcmQuZmxlZXRbc2hpcEluZGV4XS5kZXRhaWxzLmRpcmVjdGlvbiA9ICdob3Jpem9udGFsJztcbiAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5yZW1vdmUoJ3ZlcnRpY2FsJyk7XG4gICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZHJhZyhjZWxscyA9IGdyaWRDZWxscykge1xuICAgIGNvbnN0IGdldERyYWdnZWRTaGlwSW5kZXggPSAoZSkgPT4ge1xuICAgICAgc2hpcEluZGV4ID0gcGxheWVyMS5nYW1lYm9hcmQuZmxlZXQuZmluZEluZGV4KChzaGlwKSA9PiBzaGlwLmRldGFpbHMubmFtZSA9PT0gZS50YXJnZXQuZGF0YXNldC5uYW1lKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZHJhZ1N0YXJ0ID0gKGUpID0+IHtcbiAgICAgIGRyYWdnZWRTaGlwID0gZS50YXJnZXQ7XG4gICAgfTtcblxuICAgIGNvbnN0IGRyYWdPdmVyID0gKGUpID0+IGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGRyYWdFbnRlciA9IChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdob3ZlcicpO1xuICAgIH07XG5cbiAgICBjb25zdCBkcmFnTGVhdmUgPSAoZSkgPT4ge1xuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXInKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZHJhZ0Ryb3AgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgY29vcmQgPSBlLnRhcmdldDtcbiAgICAgIGNvbnN0IHkgPSBOdW1iZXIoY29vcmQuZGF0YXNldC55KTtcbiAgICAgIGNvbnN0IHggPSBOdW1iZXIoY29vcmQuZGF0YXNldC54KTtcblxuICAgICAgY29uc3QgcHJvcGVyUGxhY2VkID0gcGxheWVyMS5nYW1lYm9hcmQucGxhY2VTaGlwKFt5LCB4XSwgcGxheWVyMS5nYW1lYm9hcmQuZmxlZXRbc2hpcEluZGV4XSk7XG4gICAgICBpZiAocHJvcGVyUGxhY2VkKSB7XG4gICAgICAgIHNoaXBPbkJvYXJkICs9IDE7XG4gICAgICAgIGRyYWdnZWRTaGlwLmNsYXNzTGlzdC5hZGQoJ25vbmUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChzaGlwT25Cb2FyZCA9PT0gNSkge1xuICAgICAgICBzdGFydEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlb3V0Jyk7XG4gICAgICAgIHN0YXJ0QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmlzaWJsZScpO1xuICAgICAgICBzdGFydEJ0bi5jbGFzc0xpc3QuYWRkKCdmYWRlaW4nKTtcbiAgICAgICAgZmxlZXRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2hyaW5rJyk7XG5cbiAgICAgICAgc2hpcE9uQm9hcmQgPSAwO1xuICAgICAgfVxuXG4gICAgICBtYXJrU2hpcERpdnMoKTtcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyJyk7XG4gICAgfTtcblxuICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBkcmFnT3Zlcik7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIGRyYWdFbnRlcik7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGRyYWdMZWF2ZSk7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBkcmFnRHJvcCk7XG4gICAgfSk7XG5cbiAgICBzaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBzaGlwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGdldERyYWdnZWRTaGlwSW5kZXgpO1xuICAgICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBkcmFnU3RhcnQpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB7IHJvdGF0ZSwgZHJhZyB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgZHJhZ0FuZFJvdGF0ZTtcbiIsImltcG9ydCB7XG4gIGNvbnRhaW5lciwgc2hpcHMsIGZsZWV0Q29udGFpbmVyLCByZXN1bHRTY3JlZW4sIHJhbmRvbUJ0bixcbn0gZnJvbSAnLi9kb21FbGVtZW50cyc7XG5pbXBvcnQgY3JlYXRlR3JpZCBmcm9tICcuL2dyaWQnO1xuaW1wb3J0IHsgcGxheWVyMiwgcmVzZXRQbGF5ZXJzLCByYW5kb21QbGFjZW1lbnQgfSBmcm9tICcuL3BsYXllcnMnO1xuaW1wb3J0IGRyYWdBbmRSb3RhdGUgZnJvbSAnLi9kcmFnQW5kUm90YXRlJztcbmltcG9ydCB7IGFpUmVzZXQgfSBmcm9tICcuL2FpJztcblxuZnVuY3Rpb24gcmVzZXREb21FbGVtZW50cygpIHtcbiAgZmxlZXRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hyaW5rJyk7XG4gIHJlc3VsdFNjcmVlbi5jbGFzc0xpc3QuYWRkKCdub25lJyk7XG4gIHJhbmRvbUJ0bi5jbGFzc0xpc3QuYWRkKCdmYWRlaW4nKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlR3JpZHMoKSB7XG4gIHdoaWxlIChjb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlzcGxheVNoaXBDb250YWluZXIoKSB7XG4gIHNoaXBzLmZvckVhY2goKHNoaXApID0+IHNoaXAuY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICByZW1vdmVHcmlkcygpO1xuXG4gIGNyZWF0ZUdyaWQoKTtcblxuICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib3gnKTtcblxuICBkcmFnQW5kUm90YXRlLmRyYWcoY2VsbHMpO1xuICBkaXNwbGF5U2hpcENvbnRhaW5lcigpO1xuICByZXNldFBsYXllcnMoKTtcbiAgcmFuZG9tUGxhY2VtZW50KHBsYXllcjIpO1xuICByZXNldERvbUVsZW1lbnRzKCk7XG4gIGFpUmVzZXQoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyO1xuIiwiaW1wb3J0IHsgaGl0RXZlbnQsIG1hcmtSYW5kb21QbGFjZW1lbnQgfSBmcm9tICcuL2dhbWUnO1xuaW1wb3J0IGRyYWdBbmRSb3RhdGUgZnJvbSAnLi9kcmFnQW5kUm90YXRlJztcbmltcG9ydCB7IHJhbmRvbVBsYWNlbWVudCwgcGxheWVyMSB9IGZyb20gJy4vcGxheWVycyc7XG5pbXBvcnQge1xuICBzdGFydEJ0biwgcmVuZGVyQnRuLCByYW5kb21CdG4sIGZsZWV0Q29udGFpbmVyLFxufSBmcm9tICcuL2RvbUVsZW1lbnRzJztcbmltcG9ydCByZW5kZXIgZnJvbSAnLi9yZW5kZXInO1xuXG5mdW5jdGlvbiBFdmVudHMoKSB7XG4gIHN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGhpdEV2ZW50KCk7XG5cbiAgICBzdGFydEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlaW4nKTtcbiAgICBzdGFydEJ0bi5jbGFzc0xpc3QuYWRkKCdmYWRlb3V0Jyk7XG4gICAgc3RhcnRCdG4uY2xhc3NMaXN0LmFkZCgnaW52aXNpYmxlJyk7XG5cbiAgICByYW5kb21CdG4uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZWluJyk7XG4gICAgcmFuZG9tQnRuLmNsYXNzTGlzdC5hZGQoJ2ZhZGVvdXQnKTtcblxuICAgIGNvbnN0IGFpTWFpbkRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5haS1ncmlkLWNvbnRhaW5lcicpO1xuICAgIGFpTWFpbkRpdi5jbGFzc0xpc3QucmVtb3ZlKCdub25lJyk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGFpTWFpbkRpdi5jbGFzc0xpc3QucmVtb3ZlKCdpbnZpc2libGUnKTtcbiAgICAgIGFpTWFpbkRpdi5jbGFzc0xpc3QuYWRkKCdmYWRlaW4nKTtcbiAgICB9LCA1MDApO1xuICB9KTtcblxuICByYW5kb21CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcmVuZGVyKCk7XG4gICAgcmFuZG9tUGxhY2VtZW50KHBsYXllcjEpO1xuICAgIG1hcmtSYW5kb21QbGFjZW1lbnQoKTtcbiAgICBzdGFydEJ0bi5jbGFzc0xpc3QuYWRkKCdmYWRlaW4nKTtcbiAgICBzdGFydEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlb3V0Jyk7XG4gICAgc3RhcnRCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaW52aXNpYmxlJyk7XG4gICAgZmxlZXRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2hyaW5rJyk7XG4gIH0pO1xuXG4gIHJlbmRlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbmRlcik7XG5cbiAgZHJhZ0FuZFJvdGF0ZS5kcmFnKCk7XG4gIGRyYWdBbmRSb3RhdGUucm90YXRlKCk7XG59XG5leHBvcnQgZGVmYXVsdCBFdmVudHM7XG4iXSwic291cmNlUm9vdCI6IiJ9